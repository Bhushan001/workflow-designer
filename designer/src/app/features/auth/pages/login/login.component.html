<div class="auth-page">
  <app-navbar></app-navbar>

  <div class="auth-container">
    <div class="container">
      <div class="row justify-content-center align-items-center min-vh-100">
        <div class="col-lg-5 col-md-7">
          <div class="auth-card">
            <div class="auth-header text-center mb-4">
              <fa-icon [icon]="faRocket" class="auth-icon mb-3"></fa-icon>
              <h1 class="display-5 fw-bold mb-2">Welcome Back</h1>
              <p class="text-muted">Sign in to your account to continue</p>
            </div>

            <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
              @if (errorMessage) {
                <div class="alert alert-danger" role="alert">
                  <fa-icon [icon]="faLock" class="me-2"></fa-icon>
                  {{ errorMessage }}
                </div>
              }
              
              <div class="mb-3">
                <label for="email" class="form-label">
                  <fa-icon [icon]="faEnvelope" class="me-2"></fa-icon>
                  Email Address
                </label>
                <input
                  type="email"
                  id="email"
                  class="form-control"
                  formControlName="email"
                  placeholder="you@example.com"
                  [class.is-invalid]="email?.invalid && email?.touched"
                />
                @if (email?.invalid && email?.touched) {
                  <div class="invalid-feedback">
                    @if (email?.errors?.['required']) {
                      Email is required
                    } @else if (email?.errors?.['email']) {
                      Please enter a valid email address
                    }
                  </div>
                }
              </div>

              <div class="mb-3">
                <label for="password" class="form-label">
                  <fa-icon [icon]="faLock" class="me-2"></fa-icon>
                  Password
                </label>
                <input
                  type="password"
                  id="password"
                  class="form-control"
                  formControlName="password"
                  placeholder="Enter your password"
                  [class.is-invalid]="password?.invalid && password?.touched"
                />
                @if (password?.invalid && password?.touched) {
                  <div class="invalid-feedback">
                    @if (password?.errors?.['required']) {
                      Password is required
                    } @else if (password?.errors?.['minlength']) {
                      Password must be at least 6 characters
                    }
                  </div>
                }
              </div>

              <div class="d-flex justify-content-between align-items-center mb-4">
                <div class="form-check">
                  <input
                    type="checkbox"
                    id="rememberMe"
                    class="form-check-input"
                    formControlName="rememberMe"
                  />
                  <label class="form-check-label" for="rememberMe">
                    Remember me
                  </label>
                </div>
                <a href="#" class="text-decoration-none">Forgot password?</a>
              </div>

              <button
                type="submit"
                class="btn btn-primary w-100 mb-3"
                [disabled]="isLoading || loginForm.invalid"
              >
                @if (isLoading) {
                  <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                  Signing in...
                } @else {
                  Sign In
                  <fa-icon [icon]="faArrowRight" class="ms-2"></fa-icon>
                }
              </button>
            </form>

            <div class="auth-divider">
              <span>or</span>
            </div>

            <div class="text-center">
              <p class="mb-0">
                Don't have an account?
                <a routerLink="/signup" class="text-decoration-none fw-bold">Sign up</a>
              </p>
            </div>
            
            <!-- Mock credentials hint for development -->
            <div class="mt-4 p-3 bg-light rounded border">
              <small class="text-muted d-block mb-2">
                <strong>Mock Login Credentials (for testing):</strong>
              </small>
              <small class="text-muted d-block mb-2">
                Email: <code>admin&#64;example.com</code><br>
                Password: <code>admin123</code>
              </small>
              <button
                type="button"
                class="btn btn-sm btn-outline-primary w-100"
                (click)="fillMockCredentials()"
              >
                <fa-icon [icon]="faBolt" class="me-2"></fa-icon>
                Fill with Mock Credentials
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
